// web/app.js
// The glue file math.js is generated by emcc with -s MODULARIZE=1
// and exposes a factory function named 'Module'.
(async () => {
  // Instantiate the wasm module
  const instance = await Module();
  // Access C functions
  const add = instance.cwrap('add', 'number', ['number','number']);
  const fib = instance.cwrap('fib', 'number', ['number']);

  // Wire up UI
  document.getElementById('btnAdd').addEventListener('click', () => {
    const a = parseInt(document.getElementById('a').value || '0', 10);
    const b = parseInt(document.getElementById('b').value || '0', 10);
    const r = add(a, b);
    document.getElementById('addOut').textContent = String(r);
    console.log('add(', a, ',', b, ') =', r);
  });

  document.getElementById('btnFib').addEventListener('click', () => {
    const n = parseInt(document.getElementById('n').value || '0', 10);
    const r = fib(n);
    document.getElementById('fibOut').textContent = String(r);
    console.log('fib(', n, ') =', r);
  });
})();
